<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MaestroCat Debug</title>
    <link rel="stylesheet" href="/static/base.css">
    <link rel="stylesheet" href="/static/components.css">
    <link rel="stylesheet" href="/static/utilities.css">
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="header-brand">
                <h1 class="brand-name">MAESTROCAT</h1>
                <span class="brand-version">v1.0.0</span>
            </div>
            <div class="header-status">
                <span class="status-label">Pipeline</span>
                <span class="status-indicator" id="pipeline-status" data-status="inactive"></span>
                <span class="status-label">WebSocket</span>
                <span class="status-indicator" id="ws-status" data-status="inactive"></span>
                <button class="audio-control" id="audio-control" aria-label="Toggle audio connection">
                    <span class="audio-control-text">Connect Audio</span>
                </button>
            </div>
        </header>

        <!-- Main Grid -->
        <main class="main-grid">
            <!-- Transcription Panel -->
            <section class="panel transcription-panel" id="transcription-panel">
                <header class="panel-header">
                    <h2 class="panel-title">TRANSCRIPTION</h2>
                    <div class="panel-controls">
                        <span class="live-indicator" data-live="false">
                            <span class="live-dot"></span>
                            LIVE
                        </span>
                    </div>
                </header>
                <div class="panel-content">
                    <div class="transcription-view" id="transcription-view">
                        <div class="transcription-placeholder">
                            Waiting for audio input...
                        </div>
                    </div>
                </div>
            </section>

            <!-- Performance Panel -->
            <section class="panel performance-panel" id="performance-panel">
                <header class="panel-header">
                    <h2 class="panel-title">PERFORMANCE</h2>
                    <div class="panel-controls">
                        <select class="metric-selector" id="metric-selector">
                            <option value="latency">Latency</option>
                            <option value="throughput">Throughput</option>
                            <option value="percentiles">Percentiles</option>
                        </select>
                    </div>
                </header>
                <div class="panel-content">
                    <div class="metrics-grid">
                        <div class="metric-card">
                            <div class="metric-label">STT</div>
                            <div class="metric-value" id="stt-latency">—</div>
                            <div class="metric-unit">ms</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-label">LLM</div>
                            <div class="metric-value" id="llm-latency">—</div>
                            <div class="metric-unit">ms</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-label">TTS</div>
                            <div class="metric-value" id="tts-latency">—</div>
                            <div class="metric-unit">ms</div>
                        </div>
                        <div class="metric-card metric-card-primary">
                            <div class="metric-label">TOTAL</div>
                            <div class="metric-value" id="total-latency">—</div>
                            <div class="metric-unit">ms</div>
                        </div>
                    </div>
                    <div class="metrics-chart" id="metrics-chart">
                        <canvas id="performance-canvas"></canvas>
                    </div>
                </div>
            </section>

            <!-- Conversation Panel -->
            <section class="panel conversation-panel" id="conversation-panel">
                <header class="panel-header">
                    <h2 class="panel-title">CONVERSATION</h2>
                    <div class="panel-controls">
                        <button class="icon-button" id="clear-conversation" aria-label="Clear conversation">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                <path d="M2 4h12M5 4V2h6v2M6 7v5M10 7v5M3 4l1 10h8l1-10" stroke="currentColor" stroke-width="1.5"/>
                            </svg>
                        </button>
                        <button class="icon-button" id="export-conversation" aria-label="Export conversation">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                <path d="M8 10V2M8 2L5 5M8 2l3 3M2 9v5h12V9" stroke="currentColor" stroke-width="1.5"/>
                            </svg>
                        </button>
                    </div>
                </header>
                <div class="panel-content">
                    <div class="conversation-view" id="conversation-view">
                        <!-- Messages will be added here -->
                    </div>
                </div>
            </section>

            <!-- Configuration Panel -->
            <section class="panel configuration-panel" id="configuration-panel">
                <header class="panel-header">
                    <h2 class="panel-title">CONFIGURATION</h2>
                    <div class="panel-controls">
                        <select class="preset-selector" id="preset-selector">
                            <option value="default">Default</option>
                            <option value="low-latency">Low Latency</option>
                            <option value="high-quality">High Quality</option>
                            <option value="custom">Custom</option>
                        </select>
                    </div>
                </header>
                <div class="panel-content">
                    <div class="config-sections">
                        <!-- LLM Configuration -->
                        <div class="config-section">
                            <h3 class="config-section-title">Language Model</h3>
                            <div class="config-group">
                                <label class="config-label" for="llm-model">Model</label>
                                <select class="config-select" id="llm-model">
                                    <option value="llama3.2:3b">Llama 3.2 3B</option>
                                    <option value="llama3.2:7b">Llama 3.2 7B</option>
                                    <option value="mistral:7b">Mistral 7B</option>
                                </select>
                            </div>
                            <div class="config-group">
                                <label class="config-label" for="llm-temperature">
                                    Temperature
                                    <span class="config-value" id="llm-temperature-value">0.7</span>
                                </label>
                                <input type="range" class="config-slider" id="llm-temperature" 
                                       min="0" max="2" step="0.1" value="0.7">
                            </div>
                            <div class="config-group">
                                <label class="config-label" for="llm-max-tokens">
                                    Max Tokens
                                    <span class="config-value" id="llm-max-tokens-value">1000</span>
                                </label>
                                <input type="range" class="config-slider" id="llm-max-tokens" 
                                       min="100" max="4000" step="100" value="1000">
                            </div>
                            <div class="config-group">
                                <label class="config-label" for="llm-top-p">
                                    Top P
                                    <span class="config-value" id="llm-top-p-value">0.9</span>
                                </label>
                                <input type="range" class="config-slider" id="llm-top-p" 
                                       min="0" max="1" step="0.05" value="0.9">
                            </div>
                        </div>

                        <!-- TTS Configuration -->
                        <div class="config-section">
                            <h3 class="config-section-title">Text-to-Speech</h3>
                            <div class="config-group">
                                <label class="config-label" for="tts-voice">Voice</label>
                                <select class="config-select" id="tts-voice">
                                    <option value="af_bella">af_bella</option>
                                    <option value="af_sky">af_sky</option>
                                    <option value="am_michael">am_michael</option>
                                </select>
                            </div>
                            <div class="config-group">
                                <label class="config-label" for="tts-speed">
                                    Speed
                                    <span class="config-value" id="tts-speed-value">1.0</span>
                                </label>
                                <input type="range" class="config-slider" id="tts-speed" 
                                       min="0.5" max="2.0" step="0.1" value="1.0">
                            </div>
                        </div>

                        <!-- STT Configuration -->
                        <div class="config-section">
                            <h3 class="config-section-title">Speech-to-Text</h3>
                            <div class="config-group">
                                <label class="config-label" for="stt-language">Language</label>
                                <select class="config-select" id="stt-language">
                                    <option value="en">English</option>
                                    <option value="es">Spanish</option>
                                    <option value="fr">French</option>
                                    <option value="auto">Auto-detect</option>
                                </select>
                            </div>
                            <div class="config-group">
                                <label class="config-label" for="vad-threshold">
                                    VAD Threshold
                                    <span class="config-value" id="vad-threshold-value">0.5</span>
                                </label>
                                <input type="range" class="config-slider" id="vad-threshold" 
                                       min="0" max="1" step="0.05" value="0.5">
                            </div>
                        </div>

                        <!-- Modules -->
                        <div class="config-section">
                            <h3 class="config-section-title">Modules</h3>
                            <div class="module-list" id="module-list">
                                <div class="module-item">
                                    <span class="module-name">Memory</span>
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="module-memory">
                                        <span class="toggle-slider"></span>
                                    </label>
                                </div>
                                <div class="module-item">
                                    <span class="module-name">Voice Recognition</span>
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="module-voice-recognition">
                                        <span class="toggle-slider"></span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Event Stream Panel -->
            <section class="panel event-stream-panel" id="event-stream-panel">
                <header class="panel-header">
                    <h2 class="panel-title">EVENT STREAM</h2>
                    <div class="panel-controls">
                        <input type="search" class="event-search" id="event-search" 
                               placeholder="Filter events...">
                        <select class="event-filter" id="event-filter">
                            <option value="all">All Events</option>
                            <option value="transcription">Transcription</option>
                            <option value="llm">LLM</option>
                            <option value="tts">TTS</option>
                            <option value="metrics">Metrics</option>
                            <option value="errors">Errors</option>
                        </select>
                        <button class="icon-button" id="pause-events" aria-label="Pause event stream">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                <rect x="5" y="4" width="2" height="8" fill="currentColor"/>
                                <rect x="9" y="4" width="2" height="8" fill="currentColor"/>
                            </svg>
                        </button>
                    </div>
                </header>
                <div class="panel-content">
                    <div class="event-stream" id="event-stream">
                        <!-- Events will be added here -->
                    </div>
                </div>
            </section>
        </main>

        <!-- Command Palette (Hidden by default) -->
        <div class="command-palette" id="command-palette" aria-hidden="true">
            <div class="command-palette-backdrop"></div>
            <div class="command-palette-modal">
                <input type="search" class="command-input" id="command-input" 
                       placeholder="Type a command or search...">
                <div class="command-list" id="command-list">
                    <!-- Commands will be populated here -->
                </div>
            </div>
        </div>

        <!-- Toast Container -->
        <div class="toast-container" id="toast-container" aria-live="polite"></div>
    </div>

    <!-- Scripts -->
    <script type="module" src="/static/app.js"></script>
</body>
</html>